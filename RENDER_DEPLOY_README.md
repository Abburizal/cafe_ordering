# üöÄ Automated Render Deployment Scripts

Panduan lengkap untuk menggunakan script automated deployment ke Render.com

## üìã Daftar File

### Script Files:
- **deploy-render.sh** - Bash script (Linux/Mac)
- **deploy-render.py** - Python script (Cross-platform: Windows/Mac/Linux)
- **render.yaml** - Render deployment configuration

### Generated by Script:
- **.gitignore** - Git ignore rules
- **.env.example** - Environment template
- **config/config.php** - Updated config with env vars
- **composer.json** - PHP dependencies
- **RENDER_DEPLOYMENT_GUIDE.md** - Quick reference

---

## üéØ Cara Menggunakan

### Option 1: Python Script (RECOMMENDED)

**Keuntungan:**
- Cross-platform (Windows, Mac, Linux)
- Tidak perlu bash
- Output lebih colorful

**Langkah-langkah:**

```bash
# 1. Pastikan Python 3 terinstall
python3 --version

# 2. Run script
python3 deploy-render.py

# 3. Follow the prompts
# - Script akan check Git
# - Prepare files
# - Push to GitHub
# - Display instructions
```

### Option 2: Bash Script (Linux/Mac)

**Keuntungan:**
- Native bash
- Lebih ringan

**Langkah-langkah:**

```bash
# 1. Make script executable
chmod +x deploy-render.sh

# 2. Run script
./deploy-render.sh

# 3. Follow the prompts
```

### Option 3: Manual (Jika script tidak bisa)

```bash
# 1. Create files manually (lihat isi script)
# 2. Commit ke Git
git add .
git commit -m "Deploy preparation"

# 3. Push ke GitHub
git push origin main

# 4. Setup Render secara manual
```

---

## ‚úÖ Pre-requisites

Pastikan sudah install:

### 1. **Git**
```bash
# Check if installed
git --version

# If not installed, download from: https://git-scm.com/downloads
```

### 2. **GitHub Account**
- Buat akun di https://github.com
- Create repository bernama: cafe-ordering

### 3. **Render Account**
- Sign up di https://render.com
- Connect GitHub account

### 4. **Python** (jika pakai script Python)
```bash
# Check if installed
python3 --version

# Should be 3.6 or higher
```

---

## üöÄ Step-by-Step Deployment

### Phase 1: Prepare & Push Code

```bash
# 1. Navigate to project directory
cd /path/to/cafe_ordering

# 2. Run deployment script
python3 deploy-render.py

# 3. Script akan:
#    - Check Git prerequisites
#    - Create necessary files
#    - Prepare config
#    - Push to GitHub
```

### Phase 2: Create Render Resources

**Step 1: Create MySQL Database**

```
1. Login ke render.com
2. Dashboard ‚Üí New ‚Üí MySQL
3. Fill:
   - Name: cafe-ordering
   - Database Name: cafe_ordering
   - User: cafe_admin
4. Click Create
5. SAVE credentials yang muncul:
   - Host: mysql-xxxxx.render.com
   - User: cafe_admin
   - Password: RandomPassword123!
```

**Step 2: Create Web Service**

```
1. Dashboard ‚Üí New ‚Üí Web Service
2. Select repository: cafe-ordering
3. Configure:
   - Name: cafe-ordering
   - Environment: Docker
   - Plan: Free
4. Click Deploy
```

**Step 3: Add Environment Variables**

```
Pada Web Service Settings, add:

DB_HOST = mysql-xxxxx.render.com
DB_USER = cafe_admin
DB_PASS = RandomPassword123!
DB_NAME = cafe_ordering
APP_ENV = production
APP_DEBUG = false
```

**Step 4: Import Database**

```bash
# Option A: Command line
mysql -h mysql-xxxxx.render.com \
      -u cafe_admin \
      -p'RandomPassword123!' \
      cafe_ordering < cafe_ordering.sql

# Option B: Via Render GUI
# - Open MySQL Database
# - Click "Open in GUI"
# - Import tab
# - Upload cafe_ordering.sql
# - Execute
```

### Phase 3: Test & Monitor

```
1. Website URL: https://cafe-ordering.onrender.com
2. Admin: https://cafe-ordering.onrender.com/admin/login.php
3. Menu: https://cafe-ordering.onrender.com/public/menu.php
4. Check logs: Dashboard ‚Üí Logs
```

---

## üìù File yang Dibuat Script

### 1. render.yaml
Konfigurasi deployment untuk Render:
- PHP configuration
- Environment variables
- Database settings
- Auto-deploy setup

### 2. config/config.php
Update untuk environment variables:
```php
$host = getenv('DB_HOST');
$user = getenv('DB_USER');
$pass = getenv('DB_PASS');
$db = getenv('DB_NAME');
```

### 3. .gitignore
Menentukan file apa yang tidak di-commit:
```
vendor/
node_modules/
*.log
config/secrets.php
.env.local
```

### 4. composer.json
PHP dependencies:
```json
{
  "name": "cafe-ordering/system",
  "require": {
    "php": ">=7.4.0"
  }
}
```

### 5. .env.example
Template environment variables:
```bash
DB_HOST=mysql-xxxxx.render.com
DB_USER=cafe_admin
DB_PASS=your_password_here
DB_NAME=cafe_ordering
```

---

## üêõ Troubleshooting

### Problem: "Git is not installed"

**Solution:**
```bash
# Download Git from https://git-scm.com/downloads
# Install sesuai OS

# Verify installation
git --version
```

### Problem: "Not in a git repository"

**Solution:**
```bash
# Initialize git
git init
git remote add origin https://github.com/YOUR_USERNAME/cafe-ordering.git

# Run script again
python3 deploy-render.py
```

### Problem: "Failed to push to GitHub"

**Solution:**
```bash
# Check if you can connect to GitHub
ssh -T git@github.com

# If not working, add SSH key
# https://docs.github.com/en/github/authenticating-to-github/adding-a-new-ssh-key-to-your-github-account

# Or use HTTPS instead
git remote set-url origin https://github.com/YOUR_USERNAME/cafe-ordering.git

# Try push again
git push -u origin main
```

### Problem: "Database connection error" di Render

**Solution:**
1. Check environment variables in Render dashboard
2. Verify database credentials
3. Test connection:
   ```bash
   mysql -h HOST -u USER -p'PASS' -e "SELECT 1;"
   ```
4. Check Render logs for errors

### Problem: "Website shows blank or 500 error"

**Solution:**
1. Check Render logs: Dashboard ‚Üí Logs
2. Verify config/config.php exists
3. Ensure database is imported
4. Check file permissions

### Problem: "Real-time features not working"

**Solution:**
1. Open browser console (F12)
2. Check for API errors
3. Verify URLs are correct:
   - /admin/api/get_orders_realtime.php
   - /public/api/get_order_status_realtime.php
4. Check database connection

---

## üìä Monitoring & Maintenance

### View Logs
```
https://dashboard.render.com ‚Üí Web Service ‚Üí Logs
```

### Deploy New Changes

```bash
# 1. Make changes
# 2. Commit & push
git add .
git commit -m "Update features"
git push origin main

# 3. Render will auto-deploy (if autoDeploy: true)
# 4. Check logs to verify
```

### Restart Service

```
Dashboard ‚Üí Web Service ‚Üí Manual Deploy
```

### Update Database

```bash
# If you need to update schema
mysql -h HOST -u USER -p'PASS' cafe_ordering < cafe_ordering.sql
```

---

## üîí Security Notes

### Important:
- ‚úÖ Never commit database credentials
- ‚úÖ Use environment variables untuk secrets
- ‚úÖ Keep .env.local out of git
- ‚úÖ Use strong passwords
- ‚úÖ Enable HTTPS (Render auto-handles)

### Environment Variables:
```bash
# ‚úÖ DO: Use environment variables
$host = getenv('DB_HOST');

# ‚ùå DON'T: Hardcode credentials
$host = 'mysql-xxxxx.render.com';
```

---

## üì± Custom Domain (Optional)

Setelah deployment berhasil:

1. **Add Custom Domain**
   ```
   Dashboard ‚Üí Web Service ‚Üí Custom Domain
   ```

2. **Update DNS Records**
   ```
   At your domain registrar (Niagahoster, Rumahweb, etc):
   
   Type: CNAME
   Name: cafe-ordering (atau @)
   Value: cafe-ordering.onrender.com
   ```

3. **Wait for SSL**
   ```
   Render akan auto-generate SSL certificate
   Biasanya dalam 30 menit
   ```

---

## üìû Support Resources

- **Render Docs**: https://render.com/docs
- **Render Support**: https://render.com/support
- **Git Help**: https://git-scm.com/doc
- **MySQL Docs**: https://dev.mysql.com/doc/
- **PHP Manual**: https://www.php.net/manual/

---

## üìã Quick Checklist

Sebelum deploy:

- [ ] Buat GitHub account & repository
- [ ] Clone repository ke lokal
- [ ] Copy semua file project
- [ ] Run deploy script (py or sh)
- [ ] Push ke GitHub
- [ ] Buat Render account
- [ ] Create MySQL database di Render
- [ ] Create Web Service di Render
- [ ] Add environment variables
- [ ] Import database
- [ ] Test website

---

## üéâ Success!

Jika semua langkah berhasil:

```
‚úÖ Website live di: https://cafe-ordering.onrender.com
‚úÖ Admin bisa login
‚úÖ Real-time features berfungsi
‚úÖ Database terhubung dengan baik
```

---

**Version**: 1.0
**Last Updated**: 28 November 2025
**Status**: Production Ready ‚úÖ
